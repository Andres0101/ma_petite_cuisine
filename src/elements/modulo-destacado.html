<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/paper-rating/paper-rating.html">

<link rel="import" href="../../bower_components/app-flickity/app-flickity.html">

<link rel="import" href="plan-card.html">
<link rel="import" href="titulo-destacado.html">
<link rel="import" href="../shared-styles.html">

<dom-module id="modulo-destacado">
  <template>
    <style include="shared-styles">
      :host{
        display: block;
        width: 100%;
        padding: 50px 0;
        background-color: transparent;
        @apply(--layout-vertical);
        @apply(--layout-center);
      }

      #destacado {
        width: 100%;
        max-width: 1200px;
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }
      titulo-destacado {
        width: 20%;
        height: 337px;
        margin-right: 8px;
      }
      app-flickity{
        width: 80%;
        --app-flickity-cell:{
          width: calc(25% - 6px);
          height: 337px;
          padding: 2px 0;
          box-sizing: border-box;
          margin-right: 8px;
        }
        --flickity-prev-next-button-arrow-color: rgba(40,40,40,0.2);
        --flickity-prev-next-button:{
          background-color: white;
          @apply(--shadow-transition);
          @apply(--shadow-elevation-2dp);
        }
        --flickity-prev-next-button-hover:{
          background-color: white;
          @apply(--shadow-elevation-4dp);
        }
        --flickity-prev-next-button-active:{
          opacity: 1;
        }
      }

      @media (max-width: 1000px) {
        titulo-destacado {
          width: 30%;
        }
        app-flickity{
          width: 70%;
          --app-flickity-cell:{
            width: calc(40% - 6px);
            height: 337px;
            padding: 2px 0;
            box-sizing: border-box;
            margin-right: 8px;
          }
          --flickity-prev-next-button:{
            background-color: white;
            @apply(--shadow-transition);
            @apply(--shadow-elevation-2dp);
            width: 32px;
            height: 32px;
          }
        }
      }
      @media (max-width: 900px) {
        titulo-destacado {
          height: 285px;
        }
        app-flickity{
          --app-flickity-cell:{
            width: calc(40% - 6px);
            height: 285px;
            padding: 2px 0;
            box-sizing: border-box;
            margin-right: 8px;
          }
        }
      }
      @media (max-width: 700px) {
        titulo-destacado {
          width: 40%;
        }
        app-flickity{
          width: 60%;
          --app-flickity-cell:{
            width: calc(60% - 6px);
            height: 285px;
            padding: 2px 0;
            box-sizing: border-box;
            margin-right: 8px;
          }
        }
      }
      @media (max-width: 500px) {
        #destacado {
          @apply(--layout-vertical);
        }
        titulo-destacado {
          width: 100%;
          height: auto;
          margin-bottom: 30px;
          margin-right: 0;
        }
        app-flickity{
          width: 100%;
          --app-flickity-cell:{
            width: calc(50% - 6px);
            height: 285px;
            padding: 2px 0;
            box-sizing: border-box;
            margin-right: 8px;
          }
        }
      }
    </style>

    <div id="destacado">
      <titulo-destacado
        url=""
        title="[[items.name]]"
        description="[[items.description]]"
        content-type="[[items.items.0.content_type]]"
        btn-text="[[items.btn_name]]">
      </titulo-destacado>

      <app-flickity id="flickity" cell-align="left" free-scroll hide-page-dots contain>
        <template id="template" is="dom-repeat" items="{{items.items}}" as="card">
          <plan-card
            cell
            url="[[card.url_link]]"
            image="[[card.url_img]]"
            title="[[card.name]]"
            contentype="[[card.content_type]]"
            namentity="[[card.name_entity]]"
            date="[[card.date]]"
            rating="[[card.average_ranking_total]]"
            price="[[card.price_range]]"
            description="[[card.description]]"
            location="[[card.location]]">
          </plan-card>
        </template>
      </app-flickity>
    </div>

  </template>
  <script>
    Polymer({
      is: "modulo-destacado",

      properties: {
        items: Object
      },
      attached: function () {
        this.async(function () {
          //Destroy the empty app-flickity created when attached
          this.$.flickity.destroy();
          //Render the template
          this.$.template.render();
          //Init flickity
          this.$.flickity.init();
        });
      }
    })
  </script>
</dom-module>
