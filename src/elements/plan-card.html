<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">

<link rel="import" href="../../bower_components/paper-rating/paper-rating.html">
<link rel="import" href="../../bower_components/paper-ripple/paper-ripple.html">

<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">

<link rel="import" href="../shared-styles.html">

<dom-module id="plan-card">
  <template>
    <style include="shared-styles">
      .plan_card {
        background-color: white;
        position: relative;
        height: 100%;
        border-radius: 2px;
        overflow: hidden;
        @apply(--shadow-elevation-2dp);
        @apply(--shadow-transition);
        @apply(--plan-card);
        border-bottom: 2px solid var(--app-secondary-color);
      }
      .plan_card:hover {
        @apply(--shadow-elevation-6dp);
        @apply(--plan-card-hover);
      }
      .image {
        @apply(--plan-card-image);
      }
      .card_title {
        color: #444;
        line-height: 16px;
        font-size: 16px;
        @apply(--plan-card-title);
      }
      .card_content {
        padding: 16px;
        @apply(--plan-card-content);
      }
      .categories-recipe {
        padding: 6px 0;
        box-sizing: border-box;
      }

      @media (max-width: 600px) {
        /* Info */
        .card_content {
          padding: 12px;
        }
        .card_title {
          line-height: 14px;
          font-size: 14px;
        }
      }
    </style>

    <template is="dom-repeat" items="{{categories}}" as="categoryValue">
      <firebase-query
        app-name="mapetitecuisine"
        path="/categories"
        equal-to="{{categoryValue}}"
        data="{{categoryDetail}}" >
      </firebase-query>
    </template>

    <a href="{{url}}" class="link">
      <div class="plan_card">
        <iron-image class="image" src="{{image}}" preload fade sizing="cover"></iron-image>
        <div class="fix_overflow layout vertical">
          <div class="card_content">
            <div class="card_title overflow paper-font-body2">
              {{title}}
            </div>
            <paper-rating rating="{{rating}}" disabled></paper-rating>
            <div class="layout horizontal categories-recipe">
              <template is="dom-repeat" items="{{categoryDetail}}" as="category">
                <div class="chip_item chip_item_small noselect paper-font-caption">
                  <iron-icon icon="[[category.icon]]"></iron-icon>
                </div>
              </template>
            </div>
            <paper-button noink class="ajouter-recette">Ajouter Ã  ma liste</paper-button>
          </div>
        </div>
        <paper-ripple></paper-ripple>
      </div>
    </a>

  </template>
  <script>
    Polymer({
      is: "plan-card",

      properties: {
        url:{
          type: String,
          reflectToAttribute: true
        },
        image:{
          type: String,
          reflectToAttribute: true
        },
        title:{
          type: String,
          reflectToAttribute: true
        },
        namentity:{
          type: String,
          reflectToAttribute: true
        },
        date:{
          type: String,
          reflectToAttribute: true
        },
        rating:{
          type: String,
          reflectToAttribute: true
        },
        price:{
          type: String,
          reflectToAttribute: true
        },
        description:{
          type: String,
          reflectToAttribute: true
        },
        categories:{
          type: Array,
          reflectToAttribute: true
        }
      }
    })
  </script>
</dom-module>
